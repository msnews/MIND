try{!function(i){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=i,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=31)}({0:function(e,t,i){"use strict";var r=function(e){return!(!(n=e)||"object"!=typeof n||(t=e,"[object RegExp]"===(i=Object.prototype.toString.call(t))||"[object Date]"===i||function(e){return e.$$typeof===s}(t)));var t,i,n};var s="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function a(e,t,i){return e.concat(t).map(function(e){return o(e,i)})}function l(e){return Object.keys(e).concat((t=e,Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return t.propertyIsEnumerable(e)}):[]));var t}function c(e,t){try{return t in e}catch(e){return!1}}function u(n,r,s){var a={};return s.isMergeableObject(n)&&l(n).forEach(function(e){a[e]=o(n[e],s)}),l(r).forEach(function(e){var t,i;(!c(t=n,i=e)||Object.hasOwnProperty.call(t,i)&&Object.propertyIsEnumerable.call(t,i))&&(c(n,e)&&s.isMergeableObject(r[e])?a[e]=function(e,t){if(!t.customMerge)return d;var i=t.customMerge(e);return"function"==typeof i?i:d}(e,s)(n[e],r[e],s):a[e]=o(r[e],s))}),a}function d(e,t,i){(i=i||{}).arrayMerge=i.arrayMerge||a,i.isMergeableObject=i.isMergeableObject||r,i.cloneUnlessOtherwiseSpecified=o;var n=Array.isArray(t);return n===Array.isArray(e)?n?i.arrayMerge(e,t,i):u(e,t,i):o(t,i)}d.all=function(e,i){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,t){return d(e,t,i)},{})},e.exports=d},1:function(e,t,i){"use strict";var n,r="object"==typeof Reflect?Reflect:null,u=r&&"function"==typeof r.apply?r.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}((e.exports=a).EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,i,n){var r,s,a,o,l;return c(i),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]),void 0===a?(a=s[t]=i,++e._eventsCount):("function"==typeof a?a=s[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),0<(r=d(e))&&a.length>r&&!a.warned&&(a.warned=!0,(o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,l=o,console&&console.warn&&console.warn(l))),e}function f(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(n);return r.listener=i,n.wrapFn=r}function p(e,t,i){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):g(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n,r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){if(0<t.length&&(n=t[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var o=s[e];if(void 0===o)return!1;if("function"==typeof o)u(o,this,t);else for(var l=o.length,c=g(o,l),i=0;i<l;++i)u(c[i],this,t);return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var i,n,r,s,a;if(c(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,s=i.length-1;0<=s;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,r=s;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,i=this._events;if(void 0===i)return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){for(var n,r=Object.keys(i),s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;0<=s;s--)this.removeListener(e,t[s]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},11:function(e,t){e.exports=function(){return JSON.parse('{"unitsBaseUrl":"//www.cmbestsrv.com/vpaid/units/","version":"23_2_8","units":{},"gaRatio":10000,"errLogFactor":10,"stayInIframe":true,"settingsByConditions":[],"isLoadUnitOnWindowLoaded":false,"abTest":"","adMaxPlaySeconds":181,"adTitle":"Video","adVolume":"auto","aspectRatio":"16:9","aspectRatioNum":"{{defaultAspectRatioNum}}","defaultAspectRatioNum":1.7777777777777777,"autoPlay":true,"baseReportD":"basebanner.com","oppsDataCenter":"la","cfr":0,"country":"","clickTestSeconds":0.5,"defaultAdParameters":"","defaultTagTimeout":20,"gaFactor":10000,"gaFrameSrc":"{{urls.base}}/release-r1/assets/ga.html#page={{gaVertical}}&category={{gaVertical}}","gaVertical":"source","height":350,"interruptLoading":true,"ip":"","isAllowDuplicateKey":true,"isDebug":false,"isFirePixel":true,"isHideIframe":false,"isMobile":false,"isMobileMacros":false,"isPlayerViewable":false,"isProtectedInIframe":true,"isRepeat":true,"isResponsive":true,"isCallIDLE":false,"isShowOnAd":false,"isShowOnAdLocation":"begin","isSoundOnHover":false,"isUnitEligible":false,"isUnitViewable":false,"isUseObserver":false,"isUseNonNativeObserver":false,"kbnul":"//vidanalytics.taboola.com","lineItemId":"","loaderImage":"","logViewabilityCalc":false,"mfp":4,"mobilePlayer":"DP","mobileSpriteTimeoutSeconds":20,"mute":true,"noaop":2,"noDebugReport":false,"openingEffect":0,"originId":15,"placement":"","playerContainer":"body","playerEndSeconds":0,"playerVolume":0,"printCurrentViewPercent":false,"predefinedSettings":{"level":1},"repeat":true,"retriesLWF":5,"reportTimerSeconds":10,"ronPercent":5,"secondsBW":10,"secondsInView":2,"secondsLWF":0.1,"secondsToClose":200,"secondsToCloseGlobal":3600,"sortOrderType":0,"state":null,"timeBetweenAds":1,"totalTimeout":60,"traceViewabilitySeconds":2,"traceViewability100Seconds":2,"ulog":[""],"vastRetry":2,"vertical":"_#VERTICAL#_","viewabilityPercent":50,"volumeMuted":true,"wfManual":true,"volume":"onHover","width":624,"maxVimpsInQueue":2,"autoplayDetectorTimeoutSec":1,"useSwfVideoJs":true,"isPWOV":false,"frameType":0,"100viewPercent":100,"mpgclrslv":["gcdn.2mdn.net"],"cnvsldrt":5,"gtvid":"//cnv.tcsrv.com/getvid?url","playerTextAlign":true,"cookieMatchActive":false,"fmNoAboveSelector":"no-vabove","fmNoBelowSelector":"no-vbelow","vForce":{"isActive":true,"getAdTimeoutSeconds":60,"secondsToGetAdFail":{"0":60,"1":60}},"detach":{"width":320,"position":{"horizontal":"right","vertical":"bottom"}},"customization":{"unitContainer":{},"adTitle":{},"placeHolder":{},"playerView":{}},"midrollCollapse":{"isActive":false,"time":5},"pixels":{"D2DFallback":{"id":31468623,"type":5,"isFire":true},"conversion":{"id":31425418,"type":2,"isFire":true},"close":{"id":31579687,"type":5,"isFire":true},"timeout":{"id":31574457,"type":5,"isFire":true},"optOut":{"id":31530958,"type":5,"isFire":true},"optOutNever":{"id":31419288,"type":5,"isFire":true},"addImpresion":{"id":31579657,"type":5,"isFire":true},"eligible":{"id":31579697,"type":16,"isFire":true},"networkError":{"type":42},"lostEligibility":{"type":43,"isFire":true},"fraudDetection":{"type":32},"clickthrough":{"type":44},"error":{"id":31608187,"type":5,"isFire":true},"quarterly1":{"id":31608197,"type":5,"isFire":true},"quarterly2":{"id":31608207,"type":5,"isFire":true},"quarterly3":{"id":31608217,"type":5,"isFire":true},"complete":{"id":31608237,"type":5,"isFire":true},"render":{"id":31608177,"type":5,"isFire":true},"startWithABT":{"id":31589837,"type":45,"isFire":false},"repeatClick":{"type":46},"renderOnDemand":{"type":51},"stopUnit":{"type":52},"getAdAny":{"type":53,"isFire":false},"getAdNoRV":{"type":54,"isFire":false},"getAd":{"type":55,"isFire":false},"secondsToCloseTimer":{"type":56,"isFire":false},"secondsToCloseGlobalTimer":{"type":57,"isFire":false},"midrollCollapseTimer":{"type":58,"isFire":false},"attach":{"type":61},"detach":{"type":62},"D2DClick":{"type":63},"D2DClickSuspicious":{"type":68},"TRCResetCloseUnit":{"type":64},"sliderFeedStartWithABT":{"type":65},"onParentSelectorLost":{"type":66},"adChoice":{"type":67},"noCMPonPage":{"type":72},"hasCMPonPage":{"type":73,"isFire":true},"rvHandlerTimerExpired":{"type":74},"onPlayerHasRVinQ":{"type":75},"skippedDistancePredict":{"type":76},"publisherVideoDetected":{"type":78},"publisherIframeVideoDetected":{"type":79},"compDetectedOnPage":{"type":80},"feedxToggle":{"type":82},"testPixels":{"type":100},"fullEligibilityPredict":{"type":77,"isFire":false},"progressLoaderInit":{"type":83},"progressLoaderMove":{"type":84},"progressLoaderClose":{"type":85},"organicCardInjected":{"type":86},"organicCardInjectionFail":{"type":87},"terminateOnResize":{"type":89},"unitDelayed":{"type":93},"unitLoadAfterDelay":{"type":94},"autoplaySoundOn":{"type":95},"generalError":{"type":96},"exploreMore":{"type":98},"passbackFunctionCalled":{"type":99,"isFire":true},"onUnitDimensionsFound":{"type":116},"onVideoResetCloseUnit":{"type":117},"forcedDetach":{"type":118},"url":"//conv{{dataCenter}}mp.{{baseReportD}}/st"},"closeButton":{"hasCloseButton":true,"secondsToCloseButton":5},"urls":{"base":"//vidstat.taboola.com","staticImage":""},"player":{"versions":{"vplayer":"v9.0.77","content":"26_1_18m"},"urls":{"vplayerLocation":"{{urls.base}}/vpaid/vPlayer","vpaidLocation":"{{player.urls.vplayerLocation}}/vpaidjs/{{player.versions.vplayer}}/main-vpaid.js","playerLocation":"{{player.urls.vplayerLocation}}/player/{{player.versions.vplayer}}","contentVideosLocation":"//vidstat.taboola.com/vid","oppsBasePath":"//opps.{{baseReportD}}","nonBllbOppsBasePath":"//{{oppsDataCenter}}-vid-events.taboola.com","oppsRequest":"{{player.urls.oppsBasePath}}/OpportunityServlet","wfBasePath":"//wf.{{baseReportD}}","wfRequest":"{{player.urls.wfBasePath}}/VideoBidRequestHandlerServlet","blankLocation":"{{player.urls.contentVideosLocation}}/blackScreen5.mp4","contentLocation":"{{urls.base}}/content{{player.versions.content}}.js","contentImagesLocation":"{{player.urls.contentVideosLocation}}/img"},"settings":{"dlgverr":true,"queue_size":6,"max_ready_vpaid":3,"mprdct":0.025,"vakll":240000,"time_between_waterfall":1,"mintimwf":10000,"bfFactor":0,"ad_loaded_method":true,"wf_manual":false,"wf_dynmc_ps":false,"disctxt":"Advertisement","rstmrai":true,"pstn":"vforce2","pvpd":"video","rvfrquesttsemttr":"any","mltads":true},"b2b":1,"bfFactor":0,"hasAdControls":true,"hasBFeature":true,"hasControls":false,"isBypassFlash":true,"isFire99":true,"isFlashPlayer":true,"minVpaidRunTime":4,"playlist":[]},"components":{"D2DFallbackView":{"pubId":127968,"pubTagId":756668,"height":"{{height}}","width":"{{width}}","location":"//15.{{baseReportD}}/WhiteLabelBidRequestHandlerServlet"},"OptOut":{"hasOptOut":true,"pubId":0,"pubTagId":0,"imageLocation":"{{urls.base}}/fp/img/closeVideo.png"},"CloseButtonView":{"hasCloseButton":false,"delay":1500,"imageLocation":"{{urls.base}}/assets/x-close-24.png"},"TimerView":{"hasTimer":false,"time":3,"countdownAction":"closeButton"},"DetachButtonView":{"hasDetuchView":false,"time":1,"imageLocation":"{{urls.base}}/assets/ContractButton32.png"},"Repeat":{"isActive":false,"repalyIcon":"{{urls.base}}/assets/replay-button.svg","replayHoverIcon":"{{urls.base}}/assets/replay-button-hover.svg","learnMoreIcon":"{{urls.base}}/assets/learn-more-button.svg","learnMoreHoverIcon":"{{urls.base}}/assets/learn-more-button-hover.svg","backgroundImage":"{{urls.base}}/assets/blurry-image.png"},"PosterView":{"isActive":false,"imageLocation":"{{urls.base}}/img/play_image_4.jpg","defaultLocation":"{{urls.base}}/img/play_image_3.jpg"},"Loading":{"type":"img","imgUrl":"{{urls.base}}/assets/loading2.png","staticUrl":"{{urls.base}}/assets/repeat1.PNG"},"contentVideo":{"loadingImgae":"{{components.Loading.imgUrl}}","muteImgUrl":"{{urls.base}}/assets/video_controls/desk_muted2.svg","unmuteImgUrl":"{{urls.base}}/assets/video_controls/desk_playing2.svg","pauseImgUrl":"{{urls.base}}/assets/video_controls/pause2.svg"},"adChoice":{"isTranslateText":true,"isActive":true,"fallbackUrl":"https://popup.taboola.com/en","icon":"//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg","position":"above","title":{"isActive":false,"text":"Sponsored Video by Taboola","style":{},"logoStyle":{},"adViewStyle":{}},"videoAd":{"isActive":true,"text":"Ad","style":{},"logoStyle":{}}},"volume":{"isActive":false,"expandedText":"Unmute","timeToMinimize":2000,"style":{"border":{},"mute":{},"unmute":{},"text":{}}},"adLoadingProgress":{"isActive":false,"maxProgressTime":2000,"showProgressBar":false,"inViewPortEligibility":50}},"content":{"playClicked":true},"fd":{"pm":{"factor":0,"timeoutPeriod":1200,"url":"https://data.ad-score.com/score/cors?s=1&pid=1000026&tid=12&l1={{cipid}}&l2={{CMP_ID}}&l3={{creativeId}}&l4={{tagId}}&p1={{EX_ID}}&uid={{USER_ID}}&uip={{IP}}&ref={{referrer}}&cb={{redId}}&","pluginUrl":"//js.ad-score.com/score.min.js?pid=1000026#tid=12&l1={{cipid}}&l2={{CMP_ID}}&l3={{creativeId}}&l4={{tagId}}&p1={{EX_ID}}&uid={{USER_ID}}&uip={{IP}}&ref={{referrer}}&cb={{redId}}"}},"noSoundBrowsers":{"chrome":{"minVersion":66},"safari":{"minVersion":11},"firefox":{"minVersion":66}},"microServices":{"base_url":"//vidstat.taboola.com/","async":true,"oppsula":{"version":"1.2.8"},"videoElement":{"version":"2.0.0"},"autoplayDetector":{"version":"1.0.0"}},"ms_data":{"opps_base_path":"//opps.{{baseReportD}}","non_bllb_opps_base_path":"//{{oppsDataCenter}}-vid-events.taboola.com"},"style":{"videoBackgroundColor":"black"},"bfFactor":0,"isMultiAd":true,"kibanaEventsToSend":"all","runWfWhenEmpty":true,"viewPercent":50,"wfDynamicPause":false,"isCheckTopParentSelectorLost":true,"predictors":{"isGet1OnlyAfterAdLoaded":false,"autoKill":{"isActive":true},"bForce":{"isActive":false,"predictPoints":1},"getAdFail":{"isActive":true,"allowedPredictPoints":"any"},"multiAd":{"isActive":true,"predictPoints":"any","adQState":"q1"},"emptyQueue":{"isActive":true,"predictPoints":"any"},"loading":{"isActive":true,"predictPoints":"any"},"repeat":{"isActive":true,"predictPoints":"any"},"playerReady":{"isActive":false,"predictPoint":0},"distancePercent":{"isActive":false,"predictPoints":{}},"distancePixels":{"isActive":true,"predictPoints":{"1":{"pixelsFromSelectors":10}}},"firstScroll":{"isActive":true,"predictPoints":0},"fullEligibility":{"isActive":false,"predictPoints":1,"maxPPS":1,"checkPredictsSeconds":0.5},"intersection":{"isActive":false},"feedX":{"isActive":true,"predictPoints":"any"}},"playPriority":{"type":"ppKey","key":1,"checkForRvPriority":"onEligibility"},"rboxCssSelectors":{"title":".video-label.video-title","description":".video-label.video-description","branding":".video-label-box .branding"},"secondsToWaitForRV":5,"timeBetweenDetectionCompSeconds":5,"maxTriesForDetectingComp":10,"renderLearnMore":true,"nativeAdMapping":{"title":"title","ctaButtone":"ctatext","description":"desc","branding":"sponsored","icon":"icon"},"animation":{"onTransitionOpen":false,"onTransitionClose":false,"detach":800,"slideOut":500,"attach":500,"bump":20},"allowedHeightChange":75,"isFitToSize":true,"isMultiUnit":false,"MSNRowPadding":14,"maxCards":1,"maxAdsPerCard":0,"maxAds":0,"cardViewPercent":49,"category":"blankblack5","midrollTimeout":3,"onOutOfView":"pause","additionalCss":{"z-index":"29999 !important"},"msnSelector":"div.rcdw","msnRiverSelector":".sectioncontent","msnUpperRowsSelector":".rc-item-js","msnSponsoredSelector":"[data-nativead]","msnIsOpenOnSponsoredCards":false,"msnCanOpenFirstRow":false,"msnMinimumCardInFirstRow":2,"msnMinimumCardInSecondRow":2,"msnOrganicVidSelector":".wcvideoplayer","msnSliderAttribute":"IsInlinePlayer","msnVideoAttribute":"data-config","isDetectPubIframeVideo":true,"isDetectPubVideo":false,"publisherDetectorDelayInMs":0,"pubViewabilityPercent":0,"pubVidDetectorThreshold":0,"mutationSelectorsArray":["#maincontent"],"msnPageRescan":{"isActive":true,"intervalSeconds":0.5,"limitRescanSeconds":0},"msnNumberOfCardsPerUnit":1,"isFireSP":{"32":true},"isHomePage":false,"detachToSlider":{"isStartFromSlider":false,"isDetachToSlider":false,"isDetachAbove":false,"isDetachBelow":true,"width":350,"height":350,"position":{"horizontal":"right","vertical":"bottom","horizontalOffset":15,"verticalOffset":28},"liquidSize":{"isActive":false,"widthPercent":33,"minWidth":200,"heightPercent":30,"maxHeight":350},"customCss":null,"animation":true,"hasCloseButton":true}}')}},2:function(e,t,i){"use strict";i.d(t,"a",function(){return le});var n,s=i(1),r={SETTINGS:'\n{\n    "psthdrs": "text/plain",\n    "dnapmxvl": 0,\n    "player_version": {{PLAYER_VERSION}},\n    "wfv": 1,\n    "isAmp": {{IS_AMP}},\n    "encwfrs": false,\n    "wf_base_path": "//wf.taboola.com",\n    "wf_path": "VideoBidRequestHandlerServlet",\n    "updtcmpbfrwf": true,\n    "ab_test": "{{AB_TEST}}",\n    "auc_dast": "{{AUC_DAST}}",\n    "queue_size": 6,\n    "isPrivateBrowsing": "no",\n    "firstWaterfallNoaop": 0,\n    "max_ready_vpaid": 3,\n    "vpaidReadyCount": 0,\n    "fmpw": "",\n    "wfgenv": "1.0.6",\n    "preset.level": {{PRESET_LEVEL}}\n}',TAG_DEFAULT:'\n{\n    "pubid": "",\n    "tagid": "",\n    "cirf": "{{CIRF}}",\n    "muted": {{MUTED}},\n    "oid": {{ORIGIN_ID}},\n    "noaop": "10",\n    "sortOrderType": 0,\n    "isvideo": 0,\n    "mindur": 1,\n    "maxdur": {{DEFAULT_AD_TIMEOUT}},\n    "minbr": 1,\n    "maxbr": 10000,\n    "plmd": 0,\n    "use_as_is": false\n}\n',DEFAULT_VPAID_PARAMETERS:'\n{\n    "PUBID": 0,\n    "TAGID": 0,\n    "SERVICE": "WhiteLabelBidRequestHandlerServlet",\n    "CIRF": "",\n    "ISVIDEO": 1,\n    "PLMD": 2,\n    "MINDUR": 1,\n    "MAXDUR": 60,\n    "MINBR": 1,\n    "MAXBR": 512,\n    "SORTORDERTYPE": 0,\n    "OID": "",\n    "NOAOP": "",\n    "CM_DOMAIN": "http://exchange.basebanner.com",\n    "MUTED": false,\n    "PLAYER_WIDTH": 0,\n    "PLAYER_HEIGHT": 0\n}\n'},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o={FEED:0,SLIDER_TO_FEED:1,FEED_TO_SLIDER:2,SLIDER_TO_FEED_TO_SLIDER:3,INLINE_SINGLE_SELECTOR:4,INLINE_MULTI_SELECTOR:5,FEED_STICKY_BELOW:6,FEED_STICKY_ABOVE:7,FEED_STICKY_BELOW_ABOVE:8,WIDGET:9},l={SUB_UNIT_TYPE:o,UFM_AB_TEST_GROUPS:(a(n={},o.FEED,"_vA"),a(n,o.SLIDER_TO_FEED,"_vB"),a(n,o.FEED_TO_SLIDER,"_vC"),a(n,o.SLIDER_TO_FEED_TO_SLIDER,"_vD"),a(n,o.FEED_STICKY_BELOW,"_vE"),a(n,o.FEED_STICKY_ABOVE,"_vF"),a(n,o.FEED_STICKY_BELOW_ABOVE,"_vG"),n),FRAME_TYPES:{PLAIN_PAGE:0,FRIENDLY_IFRAME:1,NON_FRIENDLY_IFRAME:2,AMP:3,IN_APP:4},INVALID_SELECTOR_TAG_NAMES:["IMG","UL","BUTTON","INPUT","LABEL"],NODE_TYPES:{NODE_ELEMENT:1},AGG_LEVELS:{LEVELS:{STANDARD:"1",LIGHT_WATERFALL:"2",VERY_LIGHT_WATERFALL:"3",DIRECT_AND_TREMOR_RTB:"4",DIRECT_ONLY:"5",PASSBACK:"PASSBACK"}},ADV_TYPES:{TAGS:7}},c={FEED_MANAGER:"FEED_MANAGER",INLINE_FEED:"INLINE_FEED",MSN_WIDGET:"MSN_WIDGET",WIDGET_ITEM:"WIDGET_ITEM",EXPANDABLE:"EXPANDABLE","300X600":"300X600",INLINE_INSTREAM:"INLINE_INSTREAM",SLIDER:"SLIDER",RECO_REEL_WIDGET:"RECO_REEL_WIDGET"};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=i(0),f=void 0;function h(e){if(void 0!==f)return f;var t=e.get("unitType");return t===c.INLINE_INSTREAM?function(e){var t=e.get("parentSelector");{var i;t?1<(i=function(e){for(var t=document.querySelectorAll(e),i=0,n=0;n<t.length;n++){var r=t[n].getBoundingClientRect();100<=r.width&&0<=r.height&&l.INVALID_SELECTOR_TAG_NAMES.indexOf(r.tagName)<0&&i++}return i}(t))?f=l.SUB_UNIT_TYPE.INLINE_MULTI_SELECTOR:1!==i&&!g(e)||(f=l.SUB_UNIT_TYPE.INLINE_SINGLE_SELECTOR):g(e)&&(f=l.SUB_UNIT_TYPE.INLINE_SINGLE_SELECTOR)}}(e):t!==c.FEED_MANAGER&&t!==c.WIDGET_ITEM||function(e){!function(e){var t=e.get("unitType");t===c.FEED_MANAGER&&(function(e){window.TRC&&window.TRC.isAmp&&(v(e,"detachToSlider.isDetachToSlider",!1),v(e,"detachToSlider.isStartFromSlider",!1))}(e),function(e){(e.get("detachToSlider.isStartFromSlider")||e.get("detachToSlider.isDetachToSlider"))&&v(e,"stickyCard.isActive",!1)}(e),function(e){e.get("stickyCard.isActive")&&(v(e,"detachToSlider.isDetachAbove",!1),v(e,"detachToSlider.isDetachBelow",!0),v(e,"detachToSlider.isDetachToSlider",!0),v(e,"detachToSlider.isStartFromSlider",!1))}(e));{var i;t===c.WIDGET_ITEM&&((i=e.get("frameType")===l.FRAME_TYPES.PLAIN_PAGE)||function(e){v(e,"detachToSlider.isDetachToSlider",!1)}(e),(e.get("stickyCard.isActive")&&i?function(e){v(e,"detachToSlider.isDetachAbove",!1),v(e,"detachToSlider.isDetachBelow",!0),v(e,"detachToSlider.isDetachToSlider",!0),v(e,"detachToSlider.isStartFromSlider",!1)}:function(e){v(e,"stickyCard.isActive",!1)})(e),function(e){var t=e.get("width");t&&0!==t||!e.get("isOverrideWidthOnZero")||v(e,"width",300)}(e))}}(e);var t=e.get("stickyCard.isActive"),i=e.get("detachToSlider.isDetachBelow"),n=e.get("detachToSlider.isDetachAbove"),r=e.get("detachToSlider.isStartFromSlider"),s=e.get("detachToSlider.isDetachToSlider");t||r||s?t||!r||s?t||r||!s?!t&&r&&s?f=l.SUB_UNIT_TYPE.SLIDER_TO_FEED_TO_SLIDER:t&&i&&!n?f=l.SUB_UNIT_TYPE.FEED_STICKY_BELOW:t&&!i&&n?f=l.SUB_UNIT_TYPE.FEED_STICKY_ABOVE:t&&i&&n&&(f=l.SUB_UNIT_TYPE.FEED_STICKY_BELOW_ABOVE):f=l.SUB_UNIT_TYPE.FEED_TO_SLIDER:f=l.SUB_UNIT_TYPE.SLIDER_TO_FEED:f=l.SUB_UNIT_TYPE.FEED}(e),f}function g(e){if(e.get("isUsePlacementElement")){var t=e.get("placementElement");if(t&&t instanceof HTMLElement)return 1;if((t=document.getElementById("_cm_videoUnit_placeHolder".concat(e.get("redId"))))&&!function(e){for(;e!==document.body&&e!==document.head;)e=e.parentElement;return e===document.head}(t))return 1}}function y(e){if(void 0!==e){if("object"!==u(e)&&"function"!=typeof e)try{e=decodeURIComponent(e)}catch(e){}if(e&&"["===e[0]&&"]"===e[e.length-1])try{e=JSON.parse(e)}catch(e){}if("string"==typeof e&&0===e.indexOf("function")){var t=new Function("try { return ".concat(e,"; } catch(ex) {}"))();if(t)return t}return Array.isArray(e)?e.map(y):"true"===e||!0===e||"false"!==e&&!1!==e&&(""===e||isNaN(e)?e:Number(e))}}function v(e,t,i){if(-1!==t.indexOf(".")){var n,r=t.split("."),s=r.shift();e[s]=e[s]||{},"object"!==u(e[s])&&(e[s]={}),v(e[s],r.join("."),i)}else if(!i||"object"!==u(i)||Array.isArray(i)||(n=i).nodeType&&n.nodeType===l.NODE_TYPES.NODE_ELEMENT)e[t]=y(i);else for(var a in e[t]=e[t]||{},i)v(e[t],a,i[a])}function _(e){return void 0!==e}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=i(0),E=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this._buildSettings(),this._setDroppableTypes()}var e,i,n;return e=t,(i=[{key:"_buildSettings",value:function(){this.settings=this._setSettings(),this._setSubUnitType();var t,i,e=b(this.config.get("player.settings"),this._getPlayerSettings()),n=b((t=this.config,i={},["frameType","dtagid","dpubid","creativeId"].forEach(function(e){return i[e]=t[e]}),i),e);this.settings=b(this.settings,n)}},{key:"_setSettings",value:function(){return JSON.parse(r.SETTINGS.replace("{{PLAYER_VERSION}}",(e=this.config,t=e.get("player.versions.vplayer"),i=parseInt(t.replace(/^v|\./g,"")),isNaN(i)?1101:i)).replace("{{IS_AMP}}",window.TRC&&window.TRC.isAMP||!1).replace("{{AB_TEST}}",this.config.get("_abTest")).replace("{{AUC_DAST}}",this._getAucDast()).replace("{{PRESET_LEVEL}}",this._getPresetLevel()));var e,t,i}},{key:"_setSubUnitType",value:function(){var e=h(this.config);void 0!==e&&(this.settings.subUnitType=e)}},{key:"_getAucDast",value:function(){return this.config.get("cmDast")||""}},{key:"_getPresetLevel",value:function(){return this.config.get("preset.level")||1}},{key:"_getPlayerSettings",value:function(){var e={};for(var t in this.config)0===t.indexOf("player.settings.")&&(e[t.split(".")[2]]=this.config[t]);return e}},{key:"_setDroppableTypes",value:function(){this.config.get("unitType")===c.FEED_MANAGER?this._setFeedManagerDroppableTypes():this._setNonFeedManagerDroppableTypes()}},{key:"_setFeedManagerDroppableTypes",value:function(){var e=this.config.get("startCard"),t=this.config.get("permanentCard"),i=!(1!==e&&e||1!==t&&t);this.config.get("detachToSlider.isStartFromSlider")&&this.config.get("detachToSlider.isDetachToSlider")||i&&function(){var e=TRCImpl.boxes||{};for(var t in e){var i=e[t]||{},n=i.isFeedCard,r=!1;if(i.itemsTypes&&i.itemsTypes["is-organic"]&&(r=i.itemsTypes["is-organic"]),r&&n&&i.boxes.length)return i.mode}}()||this._dropAdjacency()}},{key:"_dropAdjacency",value:function(){this.set("drpbletps",["adjacencyAd"])}},{key:"_setNonFeedManagerDroppableTypes",value:function(){this.config.get("isContainerRatioNotValidForTakeOver")&&this._dropAdjacency()}},{key:"get",value:function(e){return this.settings[e]}},{key:"getWfData",value:function(){return[]}},{key:"set",value:function(e,t){this.settings[e]=t}},{key:"increaseFails",value:function(e){var t=this.get(e);t.fails++,t.failsRow++,t.tries++,this.set(e,t)}}])&&m(e.prototype,i),n&&m(e,n),t}();function T(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var D=i(0),A=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this._setCreatives()}var e,i,n;return e=t,(i=[{key:"_setCreatives",value:function(){this.prerollCreative=this.getPrerollCreatives(),this.tagDefault=this._getTagDefault(),this.creatives=D(this.tagDefault,this.prerollCreative),this._normalizeCreative(),this.capitalizeCreatives=function(e){var t={};for(var i in e)t[i.toUpperCase()]=e[i];return t}(this.creatives),this.creatives=D(JSON.parse(r.DEFAULT_VPAID_PARAMETERS),this.capitalizeCreatives)}},{key:"getPrerollCreatives",value:function(){return{noaop:this.config.get("noaop")}}},{key:"_getTagDefault",value:function(){return JSON.parse(r.TAG_DEFAULT.replace("{{CIRF}}",this._getCirf()).replace("{{MUTED}}",this._getMuted()).replace("{{ORIGIN_ID}}",this._getOriginId()).replace("{{DEFAULT_AD_TIMEOUT}}",this._getDefaultAdTimeout()))}},{key:"_getCirf",value:function(){return decodeURIComponent(this.config.get("referrer"))}},{key:"_getMuted",value:function(){return this.config.get("mute")?1:0}},{key:"_getOriginId",value:function(){return this.config.get("originId")}},{key:"_getDefaultAdTimeout",value:function(){return this.config.get("adMaxPlaySeconds")}},{key:"_normalizeCreative",value:function(){var e;this.creatives["player-width"]=this.config.get("width")||this.config.get("dimensions.width")||function(){for(var e=document.getElementsByTagName("script")||[],t=0;t<e.length;t++)if(-1<e[t].src.toLowerCase().indexOf("bidrhanser")&&e[t].parentElement){var i=e[t].parentElement.getBoundingClientRect();if(i&&i.width)return i.width}return 0}(),this.creatives["player-height"]=this.config.get("height")||this.config.get("dimensions.height")||(e=this.creatives["player-width"],Math.floor(9*e/16)),this.creatives.plmd=this._getPlmd()}},{key:"_getPlmd",value:function(){return this.creatives.use_as_is?2:0==this.creatives.plmd?this.creatives.muted?2:1:this.creatives.plmd}},{key:"get",value:function(){return this.creatives}}])&&T(e.prototype,i),n&&T(e,n),t}();function I(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e}var e,i,n;return e=t,(i=[{key:"get",value:function(e,t,i){e&&t&&(this._loadFromTRC(e,t,i)||this._loadFromExternalUrl(e,t,i))}},{key:"_loadFromTRC",value:function(e,t,i){if(this._isServiceLoadedOnTRC(e,t))return this._fireCallback(e,t,i),!0}},{key:"_isServiceLoadedOnTRC",value:function(e,t){return window.TRC&&window.TRC[e]&&window.TRC[e][t]}},{key:"_fireCallback",value:function(e,t,i){i(window.TRC[e][t])}},{key:"_loadFromExternalUrl",value:function(e,t,i){var n=document.createElement("script");n.src="".concat(this.config.get("microServices.base_url")).concat(e,"/").concat(t,"/").concat(e,".js"),n.async=this.config.get("microServices.async")||!0,n.onerror=function(){},n.onload=this._loadFromTRC.bind(this,e,t,i),document.getElementsByTagName("head")[0].appendChild(n)}}])&&I(e.prototype,i),n&&I(e,n),t}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(s){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,i,n,r=k(s);return t=a?(e=k(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),i=this,!(n=t)||"object"!==S(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):n}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i(3);var L=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(r,s["EventEmitter"]);var e,t,i,n=F(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this)).config=e,t.store=new E(e),t.creatives=new A(e),t._init(),t}return e=r,(t=[{key:"_init",value:function(){this.waterfallInProgress=!1,this.isFirstRun=!0,this.maxAllowedEmptyWaterfalls=this.store.get("ltmxemptwf"),this.emptyWaterfallsInARow=0,this.onSuccess=this._onSuccess.bind(this),this.onFail=this._onFail.bind(this),this._initDroppableAdTypes()}},{key:"_onSuccess",value:function(e){var t;this.wfGenerator.increaseWfCounter(),e&&(t=this._parseWfResponse(e),this._didReceivedDemand(t)?this._onDemandReceived(e):this._isStandardWaterfall()&&!this._isEmptyWf(t)?this._onDemandReceived(e,!0):(this._setFailedItemStats(t.tags),this._increaseEmptyWaterfalls(),this._emitFailedWaterfall()),this.waterfallInProgress=!1)}},{key:"_parseWfResponse",value:function(e){try{return this.store.get("encwfrs")&&(e=function(e){for(var t,i="",n=0;n<e.length;n++){t=n%"PlAyER".length;var r=e[n].charCodeAt(0).toString(10),s="PlAyER"[t].charCodeAt(0).toString(10);i+=String.fromCharCode(r^s)}return i}(function(e){try{for(var t=e.length,i=[],n=0;n<p.length;n++)i[p.charCodeAt(n)]=n;var r,s=p.charAt(64);!s||-1!==(r=e.indexOf(s))&&(t=r);for(var a,o,l=[],c=0,u=0;u<t;u++){u%4&&(a=i[e.charCodeAt(u-1)]<<u%4*2,o=i[e.charCodeAt(u)]>>>6-u%4*2,l[c>>>2]|=(a|o)<<24-c%4*8,c++)}for(var d=[],u=0;u<c;u++){var f=l[u>>>2]>>>24-u%4*8&255;d.push(String.fromCharCode(f))}return decodeURIComponent(escape(d.join("")))}catch(e){return""}}(e))),JSON.parse(e.replace(/^\(|\)$/g,""))}catch(e){return""}}},{key:"_didReceivedDemand",value:function(e){if(this._isEmptyWf(e))return!1;if(this.store.set("sessionData",e.sd),this.config.get("demo"))return!0;for(var t=0;t<e.tags.length;t++){var i=e.tags[t];if(this._doesItemContainVAST(i)||this._isItemAdvIsNotTagsType(i))return!0}return!1}},{key:"_isEmptyWf",value:function(e){return!e||!e.tags||0===e.tags.length}},{key:"_isStandardWaterfall",value:function(){return this.config.get("preset.level")==l.AGG_LEVELS.LEVELS.STANDARD}},{key:"_doesItemContainVAST",value:function(e){return e.vast}},{key:"_isItemAdvIsNotTagsType",value:function(e){return e.advType!==l.ADV_TYPES.TAGS}},{key:"_setFailedItemStats",value:function(e){var t=this;(e||[]).forEach(function(e){t._setItemStats(e)})}},{key:"_setItemStats",value:function(e){var t=this.store.get("lineItems")||[];-1<t.indexOf(e.lineItemId)?this._increaseItemFails(e):(this._setNewItemStats(e),t.push(e.lineItemId),this.store.set("lineItems",t))}},{key:"_increaseItemFails",value:function(e){this.store.increaseFails(parseInt(e.lineItemId))}},{key:"_setNewItemStats",value:function(e){this.store.set(parseInt(e.lineItemId),{fails:1,failsRow:1,conversions:0,tries:1})}},{key:"_increaseEmptyWaterfalls",value:function(){this.emptyWaterfallsInARow++}},{key:"_emitFailedWaterfall",value:function(){this.emit("failedWaterfall")}},{key:"_onDemandReceived",value:function(e,t){this.stop(),this._setFirstWaterfallResponse(e),this._emitDemandReceived(!t)}},{key:"stop",value:function(){this.stopped=!0,this.waterfallsInterval=clearInterval(this.waterfallsInterval)}},{key:"_setFirstWaterfallResponse",value:function(e){v(this.config,"player.settings.firstWfRes",e)}},{key:"_emitDemandReceived",value:function(e){this.emit("demandReceived",e)}},{key:"_onFail",value:function(){this.wfGenerator.increaseWfCounter(),this._increaseEmptyWaterfalls(),this.waterfallInProgress=!1,this._emitFailedWaterfall()}},{key:"_initDroppableAdTypes",value:function(){var t=this;this.adsToDrop=[],(this.store.get("drpbletps")||[]).forEach(function(e){t.adsToDrop.push(e)})}},{key:"run",value:function(){this._hasStaticWaterfall()||this._hasFirstWaterfallResponse()?this._emitDemandReceived(!0):this._loadWfGenerator()}},{key:"_hasStaticWaterfall",value:function(){return this.config.get("demandConfig")}},{key:"_hasFirstWaterfallResponse",value:function(){return this.config.get("player.settings.firstWfRes")}},{key:"_loadWfGenerator",value:function(){new w(this.config).get("wf-generator",this._getWfGeneratorVersion(),this._initWfGenerator.bind(this))}},{key:"_getWfGeneratorVersion",value:function(){return this.store.get("wfgenv")}},{key:"_initWfGenerator",value:function(e){this.wfGenerator=new e(this.store,this.creatives.get()),this._canRunWaterfall()?this._runWaterfalls():this._shouldDelayWaterfall()?this._waitForFirstScroll():this._waitForTabChange()}},{key:"_canRunWaterfall",value:function(){return!this.stopped&&(!this._didPassedMaxEmptyWaterfalls()&&(!this._shouldDelayWaterfall()&&!this._isInIdleMode()))}},{key:"_didPassedMaxEmptyWaterfalls",value:function(){return!!this.maxAllowedEmptyWaterfalls&&this.emptyWaterfallsInARow>this.maxAllowedEmptyWaterfalls}},{key:"_shouldDelayWaterfall",value:function(){return this.store.get("dlywf")}},{key:"_isInIdleMode",value:function(){return document.hidden}},{key:"_runWaterfalls",value:function(){this._startWaterfallsTimer(),this._callWaterfall()}},{key:"_startWaterfallsTimer",value:function(){var e,t;this.timeBetweenWfs=(e=this.config,(t=e.get("player.settings.mintimwf"))<1e3?t:t/1e3),this.waterfallsInterval=setInterval(this._callWaterfall.bind(this),1e3*this.timeBetweenWfs)}},{key:"_callWaterfall",value:function(){var e,t;this._canRunWaterfall()&&(e=this._getWaterfallUrl(),t=this._getWaterfallPOSTData(),this.isFirstRun=!1,this.waterfallInProgress=!0,this.wfGenerator.send({wfUrl:e,postData:t,onSuccess:this.onSuccess,onFail:this.onFail}))}},{key:"_getWaterfallUrl",value:function(){return this.wfGenerator.generateUrl({roll:{roll_type:"pre-roll"},pubid:this.config.get("pubId")||this.config.get("preroll.pubId"),tagid:this.config.get("pubTagId")||this.config.get("preroll.pubTagId"),isFirstRun:this.isFirstRun,unitWfParams:{}})}},{key:"_getWaterfallPOSTData",value:function(){return JSON.stringify(this.wfGenerator.generatePOSTParams({queueStatus:{items:[],size:0,prevItems:[]},droppedAdTypes:this.adsToDrop}))}},{key:"_waitForFirstScroll",value:function(){this.config.get("predictors.firstScroll.isActive")&&this._isUserAtTopOfThePage()?(this.checkScroll=this._checkScroll.bind(this),window.addEventListener("scroll",this.checkScroll)):this._onFirstScroll()}},{key:"_isUserAtTopOfThePage",value:function(){return 0===document.getElementsByTagName("body")[0].scrollTop&&0===document.documentElement.scrollTop}},{key:"_checkScroll",value:function(){this._isUserAtTopOfThePage()||this._onFirstScroll()}},{key:"_onFirstScroll",value:function(){window.removeEventListener("scroll",this.checkScroll),this.store.set("dlywf",!1),v(this.config,"player.settings.dlywf",!1),this._runWaterfalls()}},{key:"_waitForTabChange",value:function(){this.checkTabChange=this._checkTabChange.bind(this),window.addEventListener("visibilitychange",this.checkTabChange)}},{key:"_checkTabChange",value:function(){document.hidden||(window.removeEventListener("visibilitychange",this.checkTabChange),this._runWaterfalls())}},{key:"getFromStore",value:function(e){return this.store.get(e)}},{key:"isWaterfallInProgress",value:function(){return this.waterfallInProgress}}])&&C(e.prototype,t),i&&C(e,i),r}();function R(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=null,O=function(){function t(e){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B)return B;this.config=e,this._createBasePixelUrl(),B=this}var e,i,n;return e=t,(i=[{key:"_createBasePixelUrl",value:function(){this.pixelUrl="".concat(this._getPixelUrl(this.config.get("pixels.url")),"?cijs=convusmp&ttype={{TTYPE}}&cisd=convusmp&cipid=").concat(this.config.get("cipid"),"&crid=").concat(this.config.get("creativeId"),"&dast=").concat(this.config.get("dast"),"&cmcv=&pix={{PIXEL_ID}}&cb={{TIMESTAMP}}&uv=").concat(this.config.get("version").replace(/_/g,""),"&tms={{TIMESTAMP}}"),this._addAbTestToPixelUrl(),this._addReferrerUrlToPixelUrl(),this._addFrameTypeToPixelUrl(),this._addOmniTagParams()}},{key:"_getPixelUrl",value:function(e){return e.replace("{{dataCenter}}",this.config.get("dataCenter")).replace("{{baseReportD}}",this.config.get("baseReportD"))}},{key:"_addAbTestToPixelUrl",value:function(){var e=this.config.get("_abTest");e&&this._addToUrl("abt",e)}},{key:"_addToUrl",value:function(e,t){this.pixelUrl+="&".concat(e,"=").concat(t)}},{key:"_addReferrerUrlToPixelUrl",value:function(){var e=this.config.get("referrerUrl");e&&this._addToUrl("ru",e)}},{key:"_addFrameTypeToPixelUrl",value:function(){this._addToUrl("ft",this.config.get("frameType"))}},{key:"_addOmniTagParams",value:function(){this._addIfExist(this.config.get("tagCpmFloor"),"cft"),this._addIfExist(this.config.get("unitId"),"blid"),this._addIfExist(this.config.get("unitType"),"unm"),this._addIfExist(this.config.get("debugKey1"),"dk1"),this._addIfExist(this.config.get("debugKey2"),"dk2"),this._addIfExist(this.config.get("order"),"order")}},{key:"_addIfExist",value:function(e,t){_(e)&&this._addToUrl(t,e)}},{key:"firePixel",value:function(e,t){var i,n=this._getPixel(e);n&&n.isFire&&(i="".concat(this._generatePixelUrl(n),"&").concat(this._normalizeAdditionalData(t)),document.createElement("img").src=i)}},{key:"_getPixel",value:function(e){return this.config.get(e)}},{key:"_generatePixelUrl",value:function(e){return this.pixelUrl.replace("{{TTYPE}}",e.type||"").replace("{{PIXEL_ID}}",e.id).replace(/{{TIMESTAMP}}/g,Date.now())}},{key:"_normalizeAdditionalData",value:function(e){var t=[];for(var i in e){var n=e[i];_(n)&&""!==n&&t.push("".concat(i,"=").concat(n))}return t.join("&")}},{key:"PIXEL_TYPES",get:function(){return{START_WITH_ABT:"pixels.startWithABT",UNIT_LOADED:"pixels.unitLoaded",UNIT_LOADED_WITH_FILL:"pixels.unitLoadedWithFill",PASSBACK_FUNCTION_CALLED:"pixels.passbackFunctionCalled",UNIT_DELAYED:"pixels.unitDelayed",UNIT_LOADED_AFTER_DELAY:"pixels.unitLoadAfterDelay"}}}])&&R(e.prototype,i),n&&R(e,n),t}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function x(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(s){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,i,n,r=j(s);return t=a?(e=j(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),i=this,!(n=t)||"object"!==U(n)&&"function"!=typeof n?V(i):n}}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(r,s["EventEmitter"]);var e,t,i,n=W(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this)).config=e,t._bindedEmitLoadUnit=t._emitLoadUnit.bind(V(t)),t._initActions(),t.pixels=new O(t.config),t}return e=r,(t=[{key:"_emitLoadUnit",value:function(e){this._onLoadUnit(e),this.emit("loadUnit",e)}},{key:"_onLoadUnit",value:function(e){this._clearWfHandlerListeners(),this._clearNoDemandTimer(),e||this._setEmptyWaterfallsInARow()}},{key:"_clearWfHandlerListeners",value:function(){this.wfHandler&&(this.wfHandler.removeListener("demandReceived",this._bindedEmitLoadUnit),this.wfHandler.removeListener("failedWaterfall",this._bindedEmitLoadUnit),this.wfHandler.stop(),this._setWfsData())}},{key:"_setWfsData",value:function(){this._setSessionData(),this._setLineItems()}},{key:"_setSessionData",value:function(){v(this.config,"player.settings.sessionData",this.wfHandler.getFromStore("sessionData"))}},{key:"_setLineItems",value:function(){var t=this,e=this.wfHandler.getFromStore("lineItems")||[];v(this.config,"player.settings.lineItems",e),e.forEach(function(e){return v(t.config,"player.settings.".concat(e),t.wfHandler.getFromStore(e))})}},{key:"_setEmptyWaterfallsInARow",value:function(){this.wfHandler&&0<this.wfHandler.emptyWaterfallsInARow&&v(this.config,"player.settings.emptyWaterfallsInARow",this.wfHandler.emptyWaterfallsInARow)}},{key:"_clearNoDemandTimer",value:function(){this.noDemandTimer&&(this.noDemandTimer=clearTimeout(this.noDemandTimer))}},{key:"_initActions",value:function(){var e,t=this._handleVeryLightWaterfall.bind(this);this.actions=(M(e={},l.AGG_LEVELS.LEVELS.STANDARD,this._handleStandardWaterfall.bind(this)),M(e,l.AGG_LEVELS.LEVELS.LIGHT_WATERFALL,this._handleLightWaterfall.bind(this)),M(e,l.AGG_LEVELS.LEVELS.VERY_LIGHT_WATERFALL,t),M(e,l.AGG_LEVELS.LEVELS.DIRECT_AND_TREMOR_RTB,t),M(e,l.AGG_LEVELS.LEVELS.DIRECT_ONLY,t),M(e,l.AGG_LEVELS.LEVELS.PASSBACK,this._handlePassback.bind(this)),e)}},{key:"_handleStandardWaterfall",value:function(){window.taboolaBridge?this._emitLoadUnit():(this._initWfHandler(),this.wfHandler.once("failedWaterfall",this._bindedEmitLoadUnit))}},{key:"_handleLightWaterfall",value:function(){this._initWfHandler(),this._startNoDemandTimer(this._bindedEmitLoadUnit)}},{key:"_initWfHandler",value:function(){this.wfHandler=new L(this.config),this.wfHandler.once("demandReceived",this._bindedEmitLoadUnit),this.wfHandler.run()}},{key:"_startNoDemandTimer",value:function(e){this.noDemandTimer=setTimeout(this._onTimerEnds.bind(this,e),1e3*(this.config.get("secondsToFill")||5))}},{key:"_onTimerEnds",value:function(e){this.wfHandler.isWaterfallInProgress()||this.passbackFunc?this.wfHandler.once("failedWaterfall",e):this._emitLoadUnit()}},{key:"_handleVeryLightWaterfall",value:function(){this._initWfHandler()}},{key:"_handlePassback",value:function(){this._initWfHandler(),this._startNoDemandTimer(this._invokePassback.bind(this))}},{key:"_invokePassback",value:function(){this._onLoadUnit(),this.pixels.firePixel(this.pixels.PIXEL_TYPES.PASSBACK_FUNCTION_CALLED),this.passbackFunc()}},{key:"load",value:function(){var e=this._hasPassback()?l.AGG_LEVELS.LEVELS.PASSBACK:this.config.get("preset.level")||1;this.actions[e]()}},{key:"_hasPassback",value:function(){return this.passbackFunc=this.config.get("onPassback")||this._getPassbackHandlerFromTRC(),void 0!==this.passbackFunc}},{key:"_getPassbackHandlerFromTRC",value:function(){if(window.TRC&&window.TRC._taboolaClone)for(var e=0;e<window.TRC._taboolaClone.length;e++)if("video.passback"===window.TRC._taboolaClone[e].listenTo)return window.TRC._taboolaClone[e].handler}}])&&x(e.prototype,t),i&&x(e,i),r}(),H={atr:{},platform:{Desktop:{atr:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}},Mobile:{atr:{secondsBW:20,player:{settings:{queue_size:3,max_ready_vpaid:2}},pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}}},Y={atr:{},platform:{Desktop:{atr:{noaop:1,secondsBW:20,pubId:165757,pubTagId:946347,preroll:{pubId:165757,pubTagId:946347},midroll:{pubId:165757,pubTagId:946347},postroll:{pubId:165757,pubTagId:946347},player:{settings:{mintimwf:5e3,max_ready_vpaid:2,queue_size:3}}}},Mobile:{atr:{noaop:1,secondsBW:20,pubId:165757,pubTagId:946347,preroll:{pubId:165757,pubTagId:946347},midroll:{pubId:165757,pubTagId:946347},postroll:{pubId:165757,pubTagId:946347},player:{settings:{mintimwf:5e3,max_ready_vpaid:2,queue_size:3}}}}}},q={demo:{strength:101,atr:{},1:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause",isPWOV:!1}},2:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},3:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1184655,"midroll.pubId":133128,"midroll.pubTagId":1184655,"postroll.pubId":133128,"postroll.pubTagId":1184655,pubId:133128,pubTagId:1184655,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},isPWOV:!1}},4:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1046821,"midroll.pubId":133128,"midroll.pubTagId":1046821,"postroll.pubId":133128,"postroll.pubTagId":1046821,pubId:133128,pubTagId:1046821,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},5:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":1633025,"midroll.pubId":133128,"midroll.pubTagId":1633025,"postroll.pubId":133128,"postroll.pubTagId":1633025,pubId:133128,pubTagId:1633025,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause",isPWOV:!1}}},level:{strength:1,atr:{},2:{atr:{secondsToClose:120},units:{FEED_MANAGER:Y,INLINE_INSTREAM_OLD:Y,INLINE_INSTREAM_VFORCE:Y,SLIDER_INSTREAM:Y,SLIDER_OUTSTREAM:Y,WIDGET_ITEM:Y,RECO_REEL:Y}},3:{atr:{secondsToClose:120},units:{FEED_MANAGER:H,INLINE_INSTREAM_OLD:H,INLINE_INSTREAM_VFORCE:H,SLIDER_INSTREAM:H,SLIDER_OUTSTREAM:H,WIDGET_ITEM:H,RECO_REEL:H}},4:{atr:{pubId:383725,pubTagId:2077655,preroll:{pubId:383725,pubTagId:2077655},midroll:{pubId:383725,pubTagId:2077655},postroll:{pubId:383725,pubTagId:2077655}}}},isFireAllPixels:{strength:101,atr:{},1:{atr:{pixels:{startWithABT:{isFire:!0},getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0},secondsToCloseTimer:{isFire:!0},secondsToCloseGlobalTimer:{isFire:!0},midrollCollapseTimer:{isFire:!0}}}},2:{atr:{pixels:{getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0}}}}},predictorsPresets:{strength:101,1:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}}}}},2:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q0"}}},playerReady:{isActive:!1},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}},firstScroll:{isActive:!0,predictPoints:[0,0]}}}},3:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q0"}}},playerReady:{isActive:!0,predictPoint:"any"},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},4:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:"any"},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},5:{atr:{predictors:{multiAd:{isActive:!1},playerReady:{isActive:!0,predictPoint:"any"},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},99:{atr:{predictors:{autoKill:{isActive:!1},getAdFail:{isActive:!1},multiAd:{isActive:!1},loading:{isActive:!1},repeat:{isActive:!1},playerReady:{isActive:!1},distancePercent:{isActive:!1},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}}},isDebug:{strength:102,1:{atr:{player:{settings:{encwfrs:!1}}}}}},z=i(0),X=i.n(z);function K(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var J=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,(i=[{key:"getPreset",value:function(e){var t=e.key,i=e.value,n=e.unitType,r=e.platform;if(q[t]&&q[t][i]){var s=q[t],a=q[t].strength||1,o=q[t].atr||{},o=X()(o,s[i].atr);return s[i]&&s[i].units&&(o=this._getFromUnits(o,s[i].units,n,r)||o),{presetData:o,strength:a}}}},{key:"_getFromUnits",value:function(e,t,i,n){if(t[i]){var r=t[i].atr||{};return X()(e,r),t[i].platform&&(e=this._getByPlatform(e,t[i].platform,n)||e),e}}},{key:"_getByPlatform",value:function(e,t,i){if(t[i]){var n=t[i].atr||{};return e=X()(e,n)}}}])&&K(t.prototype,i),n&&K(t,n),e}();function Q(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.presets=[],this.config=e,this.fullfilledSetByCondition=t,this._setPresetLevels()}var e,t,n;return e=i,(t=[{key:"_setPresetLevels",value:function(){this._setDemoPreset(),this._setAggLevelPreset(),this._setIsFileAllPixelsPreset(),this._setPredictorsPresetsPreset(),this._setIsDebugPreset()}},{key:"_setDemoPreset",value:function(){var e=this.config.get("demo");e&&this._pushPreset("demo",e)}},{key:"_pushPreset",value:function(e,t){this.presets.push({key:e,value:t,unitType:this.config.get("unitType"),platform:this.config.get("isMobile")?"Mobile":"Desktop"})}},{key:"_setAggLevelPreset",value:function(){var e=this.config.get("preset.level");e&&this._pushPreset("level",e)}},{key:"_setIsFileAllPixelsPreset",value:function(){var e=this.config.get("isFireAllPixels");e&&this._pushPreset("isFireAllPixels",e)}},{key:"_setPredictorsPresetsPreset",value:function(){var e=this.config.get("predictorsPresets");e&&this._pushPreset("predictorsPresets",e)}},{key:"_setIsDebugPreset",value:function(){this.config.get("isDebug")&&this._pushPreset("isDebug",1)}},{key:"getPresets",value:function(){var e=this._getPresetsDataByStrength();this._applyArrayOfPresets(e.weaker),this._applySettings(this.fullfilledSetByCondition),this._applyArrayOfPresets(e.stronger)}},{key:"_getPresetsDataByStrength",value:function(){var i=new J,n={weaker:[],stronger:[]};return this.presets.forEach(function(e){var t=i.getPreset(e);t&&(100<t.strength?n.stronger.push(t.presetData):n.weaker.push(t.presetData))}),n}},{key:"_applyArrayOfPresets",value:function(e){var t=this;e.forEach(function(e){return t._applySettings(e)})}},{key:"_applySettings",value:function(e){for(var t in e)v(this.config,t,e[t])}}])&&Q(e.prototype,t),n&&Q(e,n),i}();function Z(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ee=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this._init()}var e,i,n;return e=t,(i=[{key:"_init",value:function(){this.syncUrl=this.config.get("sync"),this.cookieSyncParams=this.config.get("predictors.time.cookieSync")||{}}},{key:"sync",value:function(){this.syncUrl&&this.cookieSyncParams.isActive&&(this._setSyncTimeout(),this._sync())}},{key:"_setSyncTimeout",value:function(){this._canStartTimer()&&setTimeout(this._sync.bind(this),1e3*this.cookieSyncParams.lengthInSeconds)}},{key:"_canStartTimer",value:function(){return!this.stopped&&0<this.cookieSyncParams.repeat}},{key:"_sync",value:function(){var e,t=this;this.stopped||(this.cookieSyncParams.repeat--,(e=document.createElement("iframe")).style.display="none",e.src=this.syncUrl,e.onerror=function(){t.stop()},document.body.appendChild(e))}},{key:"stop",value:function(){this.stopped=!0}},{key:"getCookieSyncParams",value:function(){return this.cookieSyncParams}}])&&Z(e.prototype,i),n&&Z(e,n),t}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ne=i(0),re=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.id=this.config.redId,this.cmTagMainUrl="infra/cmTag{{MAIN_FILE}}.js",this.cmTagCssUrl="assets/css/cmOsUnit.css",this._events=[],this._settings={},this._init()}var e,i,n;return e=t,(i=[{key:"_init",value:function(){this._getWindow(),this.win&&this.win.document&&(this._setConfig(),this._setCMTag(),this._setIframeData())}},{key:"_getWindow",value:function(){!this.config.isStayInIframe&&(1!=this.config.stayInIframe||this.config.unitType!==c.EXPANDABLE&&this.config.unitType!==c["300X600"])?this._getTopWindow():this.win=window}},{key:"_getTopWindow",value:function(){this.config.placementLevel=0;try{for(this.win=window;this.win.self!==this.win.top;)this.win=this.win.top,this.config.placementLevel++}catch(e){}}},{key:"_setConfig",value:function(){this._appendCMTagConfig(),this._getCMParamsFromUrl(),this._appendReferrer(),this._appendPlacementElement(),this._appendGA()}},{key:"_appendCMTagConfig",value:function(){this._appendObject(this.win.cmTagConfig)}},{key:"_appendObject",value:function(e){"object"===te(e)&&(this.config=ne(this.config,e))}},{key:"_getCMParamsFromUrl",value:function(){var i={},e=this.win.location.href;e.slice(e.indexOf("?")+1).split("&").filter(function(e){return 0===e.indexOf("cm_")}).forEach(function(e){var t=e.slice(3).split("=");i[t[0]]=t[1]}),this.urlCMParams=i}},{key:"_appendReferrer",value:function(){this.win.document.referrer&&this._appendObject({referrerUrl:encodeURIComponent(this.win.document.referrer)})}},{key:"_appendPlacementElement",value:function(){this.config.placementElement=0<this.config.placementLevel?this.win.frameElement:document.getElementById("_cm_videoUnit_placeHolder".concat(this.config.redId))}},{key:"_appendGA",value:function(){this.config.isGA=Math.floor(Math.random()*Number(this.config.gaRatio))+1===1}},{key:"_setCMTag",value:function(){this.win.cmTag=this.win.cmTag||{},this.win.cmTag.config=this.config}},{key:"_setIframeData",value:function(){var e={inIframe:this._inIframe(),iframe:this._getIframe()};e.inIframe&&(e.isFriendlyIframe=this._isFriendlyIframe()),e.isFriendlyIframe&&(e.inDFP=this._inDFP(e.iframe)),e.inDFP&&(e.dfpData=this._getDFPData(e.iframe)),this.config.iframeData=e}},{key:"_inIframe",value:function(){return self!==top}},{key:"_getIframe",value:function(){try{return window.frameElement||document.frameElement}catch(e){}}},{key:"_isFriendlyIframe",value:function(){try{return top.document.getElementsByName("iframe"),!0}catch(e){return!1}}},{key:"_inDFP",value:function(t){if(t){return[/^google/].some(function(e){return e.test(t.id)})}}},{key:"_getDFPData",value:function(e){if(e){var t={id:e.getAttribute("id"),width:+e.getAttribute("width"),height:+e.getAttribute("height")};return t["1x1"]=1==t.width&&1==t.height,t}}},{key:"_load",value:function(e){this._stopSync(),this._setUnitPixels(e),this._loadUnit()}},{key:"_stopSync",value:function(){var e;this.cookieMatch&&(this.cookieMatch.stop(),e=this.cookieMatch.getCookieSyncParams(),v(this.config,"predictors.time.cookieSync",e))}},{key:"_setUnitPixels",value:function(e){this._setShouldFireUnitLoadPixels(),this._setUnitLoadedPixel(),this._setUnitLoadedWithFillPixel(e)}},{key:"_setShouldFireUnitLoadPixels",value:function(){var e,t,i=this.config.get("fireLoadUnitPixelsFactor")||0;this.shouldFireUnitLoadPixels=(e=0,t=99,parseInt(Math.random()*(t-e)+e)<i)}},{key:"_setUnitLoadedPixel",value:function(){this.shouldFireUnitLoadPixels?(-1===this.config.get("_abTest").indexOf("t120")&&(this._config.pushedArr=this._config.pushedArr||[],this._config.pushedArr.push({abTest:"t120"})),v(this._config,"".concat(this.pixels.PIXEL_TYPES.UNIT_LOADED,".isFire"),!0)):v(this._config,"".concat(this.pixels.PIXEL_TYPES.UNIT_LOADED,".isFire"),!1)}},{key:"_setUnitLoadedWithFillPixel",value:function(e){var t="".concat(this.pixels.PIXEL_TYPES.UNIT_LOADED_WITH_FILL,".isFire");e&&!1!==this.config.get(t)&&v(this._config,t,!0)}},{key:"_loadUnit",value:function(){this._setUnitUrl(),this._setUnitMainFile(),this._loadUnitJSFile(),this._loadUnitCSSFile()}},{key:"_setUnitUrl",value:function(){this.config.urlPrefix&&(this.config.urlPrefix=decodeURIComponent(this.config.urlPrefix)),this.unitUrl=this.config.urlPrefix||"".concat(this.config.unitsBaseUrl).concat(this.config.version,"/")}},{key:"_setUnitMainFile",value:function(){Object({NODE_ENV:"production"}).WEBPACK_SERVER;var e=this._isLaterVersionThan(this._getUrlPrefixVersion(),"13_0_0")?this.config.unitType:"Main";this.cmTagMainUrl=this.cmTagMainUrl.replace("{{MAIN_FILE}}",e)}},{key:"_isLaterVersionThan",value:function(e,t){e=this._stripVersionToSegments(e),t=this._stripVersionToSegments(t);for(var i=Math.min(e.length,t.length),n=0;n<i;n++){var r=e[n]-t[n];if(0!=r)return 0<r}return 0<e.length-t.length}},{key:"_stripVersionToSegments",value:function(e){return e.replace(/(\.0+)+$/,"").split("_")}},{key:"_getUrlPrefixVersion",value:function(){return this.unitUrl.match(/\d+_\d+_\d+/)[0]}},{key:"_loadUnitJSFile",value:function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.onload=this._onLoad.bind(this)||function(){},e.setAttribute("crossorigin","anonymous"),e.setAttribute("src","".concat(this.unitUrl).concat(this.cmTagMainUrl)),this.win.document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_onLoad",value:function(){this._config.player&&this.config.player&&(this._config.player=ne(this._config.player,this.config.player)),this.win.startCMTagMain(this._config,this)}},{key:"_loadUnitCSSFile",value:function(){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href","".concat(this.unitUrl).concat(this.cmTagCssUrl)),this.win.document.getElementsByTagName("head")[0].appendChild(e)}},{key:"on",value:function(e,t){this._events.push({name:e,cb:t})}},{key:"set",value:function(e,t){e&&"string"==typeof e&&t&&(this._settings[e]=t)}},{key:"start",value:function(){var e=this;setTimeout(function(){e.config.isLoadUnitOnWindowLoaded?e._startOnDomComplete():e._start()},250)}},{key:"_startOnDomComplete",value:function(){function e(){"complete"===document.readyState&&(document.removeEventListener("readystatechange",e),setTimeout(t._start.bind(t),0))}var t=this;document.addEventListener("readystatechange",e),e()}},{key:"_start",value:function(){this._initUnit(),y(this.config.isWaitForStartEvent)?this._handleWaitForStartEvent():this._startUnit()}},{key:"_initUnit",value:function(){this._setConfigObj(),this._appendCMUrlParams();var e=this._handleSettingsByCondition();this._setPresets(e),this._appendCMUrlParams(),this._createModelForUnit(),this._setAbTest(),this._setFrameType(),this._initPixels()}},{key:"_startUnit",value:function(){this._setCookieSync(),this._initUnitLoader()}},{key:"_setConfigObj",value:function(){var e={};for(var t in this.config)v(e,t,this.config[t]);this.config=e,this._appendFPPSettings(),this.config.get=function(e,t){for(var i=t.split("."),n=e,r=0;r<i.length&&n;r++)n=i[r]in n?n[i[r]]:void 0;return n}.bind(this,this.config)}},{key:"_appendFPPSettings",value:function(){for(var e in this._settings)v(this.config,e,this._settings[e])}},{key:"_appendCMUrlParams",value:function(){for(var e in this.urlCMParams)v(this.config,e,this.urlCMParams[e])}},{key:"_initPixels",value:function(){this.pixels=new O(this.config),this._fireStartWithABTPixel()}},{key:"_fireStartWithABTPixel",value:function(){var e,t;window.cmTag.customDataForTest=window.cmTag.customDataForTest||{},window.cmTag.customDataForTest.startWithABT=!1,this.config.get("_abTest")&&(window.cmTag.customDataForTest.startWithABT=!0,e=window.performance.timeOrigin?window.performance.timeOrigin:"",t={debug:"pn:!sqg:!torgn:".concat(e,"!ts:").concat(Date.now()),mntl:this.config.get("preset.level")},this.pixels.firePixel(this.pixels.PIXEL_TYPES.START_WITH_ABT,t),v(this._config,"".concat(this.pixels.PIXEL_TYPES.START_WITH_ABT,".isFire"),!1))}},{key:"_handleSettingsByCondition",value:function(){var i=this,n={};return(this.config.get("settingsByConditions")||[]).forEach(function(e){if(e.conditions&&e.settings&&0<e.conditions.length&&function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.key&&n.val){var r=n.val;if("function"==typeof n.val&&(r=n.val(t)),r!=t.get(n.key))return}}return 1}(e.conditions,i.config))for(var t in e.settings)-1<t.indexOf("preset")?v(i.config,t,e.settings[t]):n[t]=e.settings[t]}),n}},{key:"_createModelForUnit",value:function(){this._config=function(t){try{return d({},t)}catch(e){var i=t.feedContainer;t.feedContainer=void 0;var n=d({},t);return t.feedContainer=i,n}}(this.config),this._config.get=void 0}},{key:"_setAbTest",value:function(){var e,t,i,n,r;e=this.config,i=e.get("unitType"),-1<[c.FEED_MANAGER,c.INLINE_FEED,i===c.MSN_WIDGET,c.WIDGET_ITEM].indexOf(i)&&(t=h(e),e._appendedAbTests=[{abTest:"ufm".concat(_(t)?l.UFM_AB_TEST_GROUPS[t]:"")}]),v(this.config,"_abTest",(n=this.config.get("pushedArr")||[],r=this.config.get("_appendedAbTests")||[],n.concat(r).map(function(e){if(e.hasOwnProperty("abTest"))return e.abTest}).filter(function(e){return void 0!==e}).sort(function(e,t){var i=e.toUpperCase(),n=t.toUpperCase();return n<i?1:i<n?-1:0}).join("!")))}},{key:"_setFrameType",value:function(){v(this.config,"frameType",function(e){if(void 0!==window.taboolaMobile)return l.FRAME_TYPES.IN_APP;if(window.TRC&&window.TRC.isAMP)return l.FRAME_TYPES.AMP;var t=e.get("iframeData");return t.inIframe?t.isFriendlyIframe?l.FRAME_TYPES.FRIENDLY_IFRAME:l.FRAME_TYPES.NON_FRIENDLY_IFRAME:l.FRAME_TYPES.PLAIN_PAGE}(this.config))}},{key:"_setPresets",value:function(e){new $(this.config,e).getPresets()}},{key:"_setCookieSync",value:function(){this._canDoCookieMatch()&&(this.cookieMatch=new ee(this.config),this.cookieMatch.sync())}},{key:"_canDoCookieMatch",value:function(){return this.config.get("cookieMatchActive")}},{key:"_initUnitLoader",value:function(){this.unitLoader=new G(this.config),this.unitLoader.once("loadUnit",this._load.bind(this)),this.unitLoader.load()}},{key:"_handleWaitForStartEvent",value:function(){this.pixels.firePixel(this.pixels.PIXEL_TYPES.UNIT_DELAYED),this._createStartEventCallback()}},{key:"_createStartEventCallback",value:function(){window.TRC=window.TRC||{},window.TRC.videoFunctions={},window.TRC.videoFunctions.startEvent=this._startEventCallback.bind(this)}},{key:"_startEventCallback",value:function(){window.TRC.videoFunctions.startEvent=function(){},this.pixels.firePixel(this.pixels.PIXEL_TYPES.UNIT_LOADED_AFTER_DELAY),this._config.isWaitForStartEvent=!1,this._startUnit()}}])&&ie(e.prototype,i),n&&ie(e,n),t}();function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oe=i(0),le=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this._initCMTag()}var e,i,n;return e=t,(i=[{key:"_initCMTag",value:function(){window.cmTag=window.cmTag||{},window.cmTag.set=this._set.bind(this),window.cmTag.push=this._push.bind(this),window.cmTag.setMacros=this._setMacros.bind(this),window.cmTag.setByCondition=this._setByCondition.bind(this)}},{key:"_set",value:function(e,t,i){var n,r;arguments&&(n=e,r=t,i?this._setUnit(n,r,i):"string"==typeof n&&void 0!==r?this._setKeyVal(n,r):this._appendObject(n))}},{key:"_appendObject",value:function(e){"object"===se(e)&&(this.config=oe(this.config,e))}},{key:"_setUnit",value:function(e,t,i){this.config.units[e]=this.config.units[e]||{},this.config.units[e][t]=i}},{key:"_setKeyVal",value:function(e,t){this.config[e]=t}},{key:"_push",value:function(e,t){var i,n,r;e&&t&&(this.config.pushedArr=this.config.pushedArr||[],this.config.pushedArr.push((r=t,(n=e)in(i={})?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i)))}},{key:"_setMacros",value:function(e){this._appendObject(e);var t=this._createUnit();return t.start(),t}},{key:"_createUnit",value:function(){return new re(this.config)}},{key:"_setByCondition",value:function(e){e&&this.config.settingsByConditions.push(e)}}])&&ae(e.prototype,i),n&&ae(e,n),t}()},3:function(e,t){function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var i,n;n={},r.m=i=[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.r(t);var r=(n(a.prototype,[{key:"send",value:function(e){var t=new XMLHttpRequest,i=e.postData||"";t.open(i?"POST":"GET",e.wfUrl,!0),t.withCredentials=this.withCredentials,t.setRequestHeader("Content-type",this.contentType),t.async=this.async,t.timeout=this.timeout,t.gotResponse=!1;var n=this._onFail.bind(t,e),r=this._onReadyStateChanged.bind(t,e);return t.addEventListener("error",n),t.addEventListener("abort",n),t.addEventListener("timeout",n),t.addEventListener("readystatechange",r),t.send(i),!0}},{key:"_onFail",value:function(e){this.gotResponse||(this.gotResponse=!0,e.onFail&&e.onFail([this.status],e.wfUrl))}},{key:"_onReadyStateChanged",value:function(e){if(4==this.readyState){if(this.gotResponse)return;this.gotResponse=!0,e.onSuccess&&e.onSuccess(this.responseText,void 0,e.wfUrl)}}}]),a),s=[{id:5,mime:"application/javascript",video:!1},{id:8,mime:"video/x-ms-wmv",video:!0},{id:10,mime:"video/mp4",video:!0},{id:11,mime:"video/ogg",video:!0},{id:12,mime:"video/webm",video:!0}];function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.async=null==t||t,this.withCredentials=null==i||i,this.timeout=n||5e3,this.contentType=e||"application/x-www-form-urlencoded"}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}window._cm_wfCounter=window._cm_wfCounter||1;var c,u=(l(d.prototype,[{key:"_init",value:function(){this.dynamicNoaopMaxValue=this.store.get("dnapmxvl"),this.playerVersion=this.store.get("player_version"),this.timezoneOffset=-1*(new Date).getTimezoneOffset(),this.waterfallVersion=this.store.get("wfv"),this.isAmp=this.store.get("isAmp")?"1":"0",this.encodeWaterfallResponse=this.store.get("encwfrs")?1:void 0}},{key:"_setBaseUrl",value:function(){var e,t=this.store.get("wf_base_path")||this.creatives.CM_DOMAIN,i=this.store.get("wf_path")||this.creatives.SERVICE;this.baseUrl="".concat(("string"!=typeof(e=t)||0!==(e=e.replace(/^(http[s]?:|ftp:)/g,"")).indexOf("//")&&(e="//"+e),e)).concat(/.*\/$/g.test(t)?"":"/").concat(i)}},{key:"_getConsentData",value:function(){this.updateCMPData=this.store.get("updtcmpbfrwf"),this.updateCMPData&&this._initConsentData()}},{key:"_initConsentData",value:function(){this.rboxConsentData=window.TRC&&window.TRC.consentData?window.TRC.consentData:{},this.consentData={cdb:this.store.get("cdb")||this.rboxConsentData.consentDaisyBit,gdprApplies:this.store.get("gdprApplies")||this.rboxConsentData.gdprApplies}}},{key:"_checkMimeTypes",value:function(){var e=document.createElement("video");this.supportedMimeTypes=[],this.supportedMimeTypes.push(5);for(var t=0;t<s.length;t++){var i=s[t];i.video&&e.canPlayType(i.mime)&&this.supportedMimeTypes.push(i.id)}e=void 0,this.supportedMimeTypes=this.supportedMimeTypes.join(",")}},{key:"generateUrl",value:function(e){var t="".concat(this.baseUrl,"?").concat(this._setWfUrlQuerystring(e));return window.lastWfUrl=t}},{key:"_setServiceName",value:function(){return this.store.get("wf_path")||this.creatives.SERVICE}},{key:"_setWfUrlQuerystring",value:function(e){if(!e.roll)return"";this._updateConsentData();var t,i=o(this._buildParamsForQuerystring(e),this._buildOptionalParamsForQuerystring(),this._buildGDPRParamsForQuerystring(e)),i=this._appendUnitParams(i,e),n=(t=i,Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])}));return(n=this._appendWfExtraParams(n)).join("&")}},{key:"_updateConsentData",value:function(){var t=this;this.updateCMPData&&void 0!==window.__cmp&&window.__cmp("getConsentData",null,function(e){t.consentData.cdbUpdated=t.consentData.cdb!==e.consentData,t.consentData.cdb=e.consentData,t.consentData.gdprApplies=e.gdprApplies})}},{key:"_buildParamsForQuerystring",value:function(e){return{oid:this.creatives.OID,width:this.creatives.PLAYER_WIDTH||this.creatives["PLAYER-WIDTH"],height:this.creatives.PLAYER_HEIGHT||this.creatives["PLAYER-HEIGHT"],pubid:e.pubid||this.creatives.PUBID,tagid:e.tagid||this.creatives.TAGID,crid:this.store.get("creativeId")||"",noaop:this._decideNoaop(e.isFirstRun,this.creatives.NOAOP),sortOrderType:this.creatives.SORTORDERTYPE,cb:(new Date).getTime(),mimes:this.supportedMimeTypes,isvideo:this.creatives.ISVIDEO,plmd:this.creatives.PLMD,mindur:this.creatives.MINDUR,maxdur:this.creatives.MAXDUR,minbr:this.creatives.MINBR,maxbr:this.creatives.MAXBR,st:(t=e.roll.roll_type,(n={"pre-roll":i=0,preroll:0,"mid-roll":-1,midroll:-1,"post-roll":-2,postroll:-2}).hasOwnProperty(t)&&(i=n[t]),i),seq:window._cm_wfCounter,pv:this.playerVersion||999,pt:function(e){if(!e||"string"!=typeof e)return 0;var t;void 0===t&&(t=0);var i=0;t^=-1;for(var n=0,r=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e)).length;n<r;n++)i=255&(t^e.charCodeAt(n)),t=t>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*i,8);return-1^t}(this.store.get("ab_test")||999),tz:this.timezoneOffset,viewable:!document.hidden,ddast:this.store.get("auc_dast"),proto:"2,3,5,6",encoded:1,pstn:this.store.get("pstn")||1,callback:"",wfv:this.waterfallVersion,amp:this.isAmp,qsz:this.store.get("queue_size")||10,ft:this.store.get("frameType"),pb:"yes"===this.store.get("isPrivateBrowsing")?"1":"0",pagg:this.store.get("preset.level")||1};var t,i,n}},{key:"_decideNoaop",value:function(e,t){var i,n;return(e?this.store.get("firstWaterfallNoaop"):0<this.dynamicNoaopMaxValue?(i=this.store.get("max_ready_vpaid")||0,n=this.store.get("vpaidReadyCount")||0,Math.min(this.dynamicNoaopMaxValue,i-n)):t)||t}},{key:"_buildOptionalParamsForQuerystring",value:function(){var e=this.store.get("mprdct"),t=this.store.get("subUnitType"),i={dtagid:this.store.get("dtagid")||void 0,dpubid:this.store.get("dpubid")||void 0,abtst:this.store.get("ab_test")||void 0,mPre:void 0!==e?e:void 0,fmli:this.store.get("fmli")||void 0,fmpw:this.store.get("fmpw")||void 0,cirf:this.creatives.CIRF?encodeURIComponent(decodeURIComponent(this.creatives.CIRF)):void 0,en:this.encodeWaterfallResponse,subu:"undefiend"!=typeof t?t:void 0};return JSON.parse(JSON.stringify(i))}},{key:"_buildGDPRParamsForQuerystring",value:function(){return{cdb:(this.updateCMPData?this.consentData.cdb:this.store.get("cdb"))||"",gdprApplies:(this.updateCMPData?this.consentData.gdprApplies:this.store.get("gdprApplies"))||!1}}},{key:"_appendUnitParams",value:function(e,t){return 0<Object.keys(t.unitWfParams).length?o(e,t.unitWfParams):e}},{key:"_appendWfExtraParams",value:function(e){var t=this.store.get("wf_xrta");return t&&e.push(t),e}},{key:"generatePOSTParams",value:function(e){return o(this._buildParamsForPOSTData(e),this._buildOptionalParamsForPOSTData())}},{key:"_buildParamsForPOSTData",value:function(e){var t=this.store.get("navigatorConnection")||{};return{fv:this._buildLineItemsDataForPOSTData(),wfv:this.waterfallVersion,adv:this.store.getWfData(),cdl:t.downlink||0,cet:t.effectiveTypeId||0,ct:t.typeId||0,crt:t.rtt||0,csd:!0===t.saveData?1:0,q:e.queueStatus?e.queueStatus.items:[],qs:e.queueStatus?e.queueStatus.size:0,pq:e.queueStatus?e.queueStatus.prevItems:[],drp:btoa(JSON.stringify(e.droppedAdTypes))}}},{key:"_buildLineItemsDataForPOSTData",value:function(){var i=this,e=this.store.get("lineItems")||[];return 0===e.length?[]:e.map(function(e){var t=i.store.get(e);return{li:e,f:t.fails,fr:t.failsRow,c:t.conversions,t:t.tries}})}},{key:"_buildOptionalParamsForPOSTData",value:function(){var e=this.store.get("subUnitType"),t=this.store.get("EP_PLAYER"),i=this.store.get("sessionData"),n={sd:i&&"undefined"!==i?i:void 0,en:this.encodeWaterfallResponse,subu:void 0!==e?e:void 0,ls:!this.sentCookiesData&&t?t:void 0};return this.sentCookiesData||(this.sentCookiesData=!0),JSON.parse(JSON.stringify(n))}},{key:"send",value:function(e){this.XHR.send(e)}},{key:"getWfCounter",value:function(){return window._cm_wfCounter}},{key:"increaseWfCounter",value:function(){window._cm_wfCounter++}},{key:"getConsentData",value:function(){return this.consentData}},{key:"getRboxConsentData",value:function(){return this.rboxConsentData}}]),d);function d(e,t){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.store=e,this.creatives=t,this.XHR=new r(this.store.get("psthdrs")||"application/json",!0,!0,5e3),this._init(),this._setBaseUrl(),this._getConsentData(),this._checkMimeTypes()}try{window.cmTag&&((c=window.cmTag.config.ms||{})["wf-generator"]=c["wf-generator"]||{},c["wf-generator"]["1.0.6"]=u,window.cmTag.set("ms",c))}catch(e){}try{window.TRC=window.TRC||{},window.TRC["wf-generator"]=window.TRC["wf-generator"]||{},window.TRC["wf-generator"]["1.0.6"]=u}catch(e){}}],r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)},31:function(e,t,i){"use strict";i.r(t);var n=i(11),r=i.n(n),s=i(2);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._createCMTagFunctionality()}var t,i,n;return t=e,(i=[{key:"_createCMTagFunctionality",value:function(){this.cmTag=new s.a(r()())}}])&&a(t.prototype,i),n&&a(t,n),e}())}});}catch(ex){}